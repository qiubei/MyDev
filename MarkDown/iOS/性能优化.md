# 性能优化

**TableViewCell 复用**

个数复用

在 cellForRowAtIndexPath:回调的时候只创建实例，快速返回 cell，不绑定数据。在willDisplayCell: forRowAtIndexPath:的时候绑定数据（赋值）。

 **高度缓存**

在tableView滑动时，会不断调用 heightForRowAtIndexPath:，当 cell 高度需要自适应时，每次回调都要计算高度，会导致 UI 卡顿。为了避免重复无意义的计算，需要缓存高度。

**视图**

不要动态创建视图
- 在内存可控的前提下，缓存 subview。
- 善用hidden。

减少视图层级
- 减少 subviews 个数，用 layer 绘制元素。
- 少用 clearColor，maskToBounds，阴影效果等。

